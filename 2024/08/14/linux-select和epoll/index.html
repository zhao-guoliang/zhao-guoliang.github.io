<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>linux-selectå’Œepoll | Hexo</title>
  <meta name="keywords" content="">
  <meta name="description" content="linux-selectå’Œepoll | Hexo">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="åœ¨ C++11 ä¸­ï¼Œstd::condition_variable çš„ wait æ–¹æ³•ç”¨äºä½¿çº¿ç¨‹åœ¨æŸä¸ªæ¡ä»¶æ»¡è¶³ä¹‹å‰ç­‰å¾…ï¼Œå¹¶è‡ªåŠ¨é‡Šæ”¾å’Œé‡æ–°è·å¾—äº’æ–¥é‡ã€‚ä¸‹é¢è¯¦ç»†è§£é‡Š cv.wait(lock, [] &#123; return ready; &#125;); è¿™è¡Œä»£ç çš„ä½œç”¨å’Œå·¥ä½œåŸç†ï¼š cv.wait(lock, [] &#123; return ready; &#125;); è§£é‡Š cv.wait(">
<meta property="og:type" content="article">
<meta property="og:title" content="c++11æ¡ä»¶å˜é‡">
<meta property="og:url" content="http://example.com/2025/09/08/c-11%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8F/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="åœ¨ C++11 ä¸­ï¼Œstd::condition_variable çš„ wait æ–¹æ³•ç”¨äºä½¿çº¿ç¨‹åœ¨æŸä¸ªæ¡ä»¶æ»¡è¶³ä¹‹å‰ç­‰å¾…ï¼Œå¹¶è‡ªåŠ¨é‡Šæ”¾å’Œé‡æ–°è·å¾—äº’æ–¥é‡ã€‚ä¸‹é¢è¯¦ç»†è§£é‡Š cv.wait(lock, [] &#123; return ready; &#125;); è¿™è¡Œä»£ç çš„ä½œç”¨å’Œå·¥ä½œåŸç†ï¼š cv.wait(lock, [] &#123; return ready; &#125;); è§£é‡Š cv.wait(">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-09-08T12:43:21.321Z">
<meta property="article:modified_time" content="2025-09-08T10:48:50.915Z">
<meta property="article:author" content="ZhaoGuoliang">
<meta name="twitter:card" content="summary">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 7.3.0"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="/img/avatar.jpg"/>
</a>
<div class="author">
    <span>ZhaoGuoliang</span>
</div>

<div class="icon">
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <a title="email"
               href="mailto:2646007077@qq.com"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-email"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="qq"
               href="http://wpa.qq.com/msgrd?v=3&uin=2646007077&site=qq&menu=yes"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-qq"></use>
                    </svg>
                
            </a>
        
    
        
    
        
    
</div>





<ul>
    <li>
        <div class="all active" data-rel="All">All
            
                <small>(38)</small>
            
        </div>
    </li>
    
        
            
                
    <li>
        <div data-rel="æ•°æ®ç»“æ„">
            
            æ•°æ®ç»“æ„
            <small>(3)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="C/C++">
            
            C/C++
            <small>(8)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="Linux">
            
            Linux
            <small>(9)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="QT">
            
            QT
            <small>(2)</small>
        </div>
        
    </li>

            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
            
            
    </div>
    <div>
        
            <a class="about  site_url"
               
               href="/about">About</a>
        
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="38">

<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        Links
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="http://yelog.org/">å¶è½é˜</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="search shortcut key i"></i>
            <div class="right-title">All</div>
            <i class="iconfont icon-file-tree" data-title="switch to outline view shortcut key w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="return"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="case sensitive"></i>
            <i class="iconfont icon-tag" data-title="label"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">outline</div>
            <i class="iconfont icon-list" data-title="switch to article list"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
    </div>

</div>

    
    <div id="local-search-result">

    </div>
    
    <nav id="title-list-nav">
        
        
        <a  class="All C/C++ "
           href="/2025/09/08/c-11%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8F/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="c++11æ¡ä»¶å˜é‡">c++11æ¡ä»¶å˜é‡</span>
            <span class="post-date" title="2025-09-08 20:43:21">2025/09/08</span>
        </a>
        
        
        <a  class="All "
           href="/2025/09/08/hello-world/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Hello World">Hello World</span>
            <span class="post-date" title="2025-09-08 20:32:57">2025/09/08</span>
        </a>
        
        
        <a  class="All "
           href="/2024/11/02/QT%E2%80%94%E2%80%94QSS%E7%95%8C%E9%9D%A2%E9%A3%8E%E6%A0%BC%E5%88%86%E4%BA%AB/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="QTâ€”â€”QSSç•Œé¢é£æ ¼åˆ†äº«">QTâ€”â€”QSSç•Œé¢é£æ ¼åˆ†äº«</span>
            <span class="post-date" title="2024-11-02 17:15:50">2024/11/02</span>
        </a>
        
        
        <a  class="All "
           href="/2024/11/02/QT%E5%A4%9A%E7%BA%BF%E7%A8%8B/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="QTå¤šçº¿ç¨‹">QTå¤šçº¿ç¨‹</span>
            <span class="post-date" title="2024-11-02 17:15:25">2024/11/02</span>
        </a>
        
        
        <a  class="All "
           href="/2024/11/02/QT%E9%85%8D%E7%BD%AE%E5%8A%A8%E6%80%81%E5%BA%93%E9%9D%99%E6%80%81%E5%BA%93%E5%A4%B4%E6%96%87%E4%BB%B6/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="QTé…ç½®åŠ¨æ€åº“é™æ€åº“å¤´æ–‡ä»¶">QTé…ç½®åŠ¨æ€åº“é™æ€åº“å¤´æ–‡ä»¶</span>
            <span class="post-date" title="2024-11-02 17:15:03">2024/11/02</span>
        </a>
        
        
        <a  class="All "
           href="/2024/11/02/QTest%E6%B5%8B%E8%AF%95/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="QTestæµ‹è¯•">QTestæµ‹è¯•</span>
            <span class="post-date" title="2024-11-02 17:14:12">2024/11/02</span>
        </a>
        
        
        <a  class="All "
           href="/2024/11/02/Visualstudio%E6%89%93%E5%BC%80qt%E7%95%8C%E9%9D%A2%E9%97%AA%E9%80%80/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Visualstudioæ‰“å¼€qtç•Œé¢é—ªé€€">Visualstudioæ‰“å¼€qtç•Œé¢é—ªé€€</span>
            <span class="post-date" title="2024-11-02 17:13:52">2024/11/02</span>
        </a>
        
        
        <a  class="All QT "
           href="/2024/11/02/QT%E7%A8%8B%E5%BA%8F%E6%89%93%E5%8C%85/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="QTç¨‹åºæ‰“åŒ…">QTç¨‹åºæ‰“åŒ…</span>
            <span class="post-date" title="2024-11-02 17:11:39">2024/11/02</span>
        </a>
        
        
        <a  class="All QT "
           href="/2024/11/02/QT%E7%95%8C%E9%9D%A2%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="QTä¸­æ–‡ä¹±ç ">QTä¸­æ–‡ä¹±ç </span>
            <span class="post-date" title="2024-11-02 16:58:21">2024/11/02</span>
        </a>
        
        
        <a  class="All æ•°æ®ç»“æ„ "
           href="/2024/08/22/%E3%80%82%E3%80%82%E3%80%82/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="ã€‚ã€‚ã€‚">ã€‚ã€‚ã€‚</span>
            <span class="post-date" title="2024-08-22 21:41:20">2024/08/22</span>
        </a>
        
        
        <a  class="All "
           href="/2024/08/21/lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="lambdaè¡¨è¾¾å¼">lambdaè¡¨è¾¾å¼</span>
            <span class="post-date" title="2024-08-21 17:17:25">2024/08/21</span>
        </a>
        
        
        <a  class="All Linux "
           href="/2024/08/17/pthread-rwlock-t%E6%9C%AA%E5%AE%9A%E4%B9%89%E9%97%AE%E9%A2%98/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="pthread_rwlock_tæœªå®šä¹‰é—®é¢˜">pthread_rwlock_tæœªå®šä¹‰é—®é¢˜</span>
            <span class="post-date" title="2024-08-17 22:14:38">2024/08/17</span>
        </a>
        
        
        <a  class="All C/C++ "
           href="/2024/08/17/C-100/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="C100">C100</span>
            <span class="post-date" title="2024-08-17 09:53:59">2024/08/17</span>
        </a>
        
        
        <a  class="All Linux "
           href="/2024/08/14/linux-gdb/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="gdbè°ƒè¯•">gdbè°ƒè¯•</span>
            <span class="post-date" title="2024-08-14 21:34:19">2024/08/14</span>
        </a>
        
        
        <a  class="All "
           href="/2024/08/14/linux-select%E5%92%8Cepoll/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="linux-selectå’Œepoll">linux-selectå’Œepoll</span>
            <span class="post-date" title="2024-08-14 21:09:14">2024/08/14</span>
        </a>
        
        
        <a  class="All Linux "
           href="/2024/08/14/linux-return%E5%92%8Cexit/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="returnå’Œexit">returnå’Œexit</span>
            <span class="post-date" title="2024-08-14 10:00:27">2024/08/14</span>
        </a>
        
        
        <a  class="All Linux "
           href="/2024/08/13/linux-%E6%85%A2%E9%80%9F%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8%E8%A2%AB%E4%BF%A1%E5%8F%B7%E4%B8%AD%E6%96%AD/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="linux-æ…¢é€Ÿç³»ç»Ÿè°ƒç”¨è¢«ä¿¡å·ä¸­æ–­">linux-æ…¢é€Ÿç³»ç»Ÿè°ƒç”¨è¢«ä¿¡å·ä¸­æ–­</span>
            <span class="post-date" title="2024-08-13 20:04:15">2024/08/13</span>
        </a>
        
        
        <a  class="All Linux "
           href="/2024/08/13/linux-%E4%BD%BF%E7%94%A8SIGCHILD%E4%BF%A1%E5%8F%B7%E5%9B%9E%E6%94%B6%E5%AD%90%E8%BF%9B%E7%A8%8B%E7%A9%BA%E9%97%B4/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="ä½¿ç”¨SIGCHLDä¿¡å·å›æ”¶å­è¿›ç¨‹ç©ºé—´">ä½¿ç”¨SIGCHLDä¿¡å·å›æ”¶å­è¿›ç¨‹ç©ºé—´</span>
            <span class="post-date" title="2024-08-13 19:43:05">2024/08/13</span>
        </a>
        
        
        <a  class="All Linux "
           href="/2024/08/11/linux-sigaction/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="sigactionå‡½æ•°">sigactionå‡½æ•°</span>
            <span class="post-date" title="2024-08-11 22:08:03">2024/08/11</span>
        </a>
        
        
        <a  class="All "
           href="/2024/08/10/linux-%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="linux-è¿›ç¨‹é—´é€šä¿¡">linux-è¿›ç¨‹é—´é€šä¿¡</span>
            <span class="post-date" title="2024-08-10 15:19:29">2024/08/10</span>
        </a>
        
        
        <a  class="All Linux "
           href="/2024/08/09/linux-fcntl%E5%87%BD%E6%95%B0/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="fcntlå‡½æ•°">fcntlå‡½æ•°</span>
            <span class="post-date" title="2024-08-09 21:43:28">2024/08/09</span>
        </a>
        
        
        <a  class="All Linux "
           href="/2024/08/09/linux%E9%80%92%E5%BD%92%E9%81%8D%E5%8E%86%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%96%87%E4%BB%B6/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="linuxé€’å½’éå†ç›®å½•ä¸‹æ–‡ä»¶,å¹¶åˆ¤æ–­æ–‡ä»¶ç±»å‹">linuxé€’å½’éå†ç›®å½•ä¸‹æ–‡ä»¶,å¹¶åˆ¤æ–­æ–‡ä»¶ç±»å‹</span>
            <span class="post-date" title="2024-08-09 21:25:09">2024/08/09</span>
        </a>
        
        
        <a  class="All Linux "
           href="/2024/08/09/linux%E6%89%A9%E5%AE%B9/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="ç»™CentOS7æ ¹ç›®å½•æ‰€å¯¹åº”çš„åˆ†åŒºæ‰©å®¹">ç»™CentOS7æ ¹ç›®å½•æ‰€å¯¹åº”çš„åˆ†åŒºæ‰©å®¹</span>
            <span class="post-date" title="2024-08-09 19:34:20">2024/08/09</span>
        </a>
        
        
        <a  class="All "
           href="/2024/08/08/google%E6%90%9C%E7%B4%A2%E8%AF%AD%E6%B3%95/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="googleæœç´¢è¯­æ³•">googleæœç´¢è¯­æ³•</span>
            <span class="post-date" title="2024-08-08 23:45:44">2024/08/08</span>
        </a>
        
        
        <a  class="All æ•°æ®ç»“æ„ "
           href="/2024/08/08/B-%E6%A0%91/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="B+æ ‘">B+æ ‘</span>
            <span class="post-date" title="2024-08-08 16:50:41">2024/08/08</span>
        </a>
        
        
        <a  class="All æ•°æ®ç»“æ„ "
           href="/2024/08/07/%E8%B7%B3%E8%A1%A8/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="è·³è¡¨">è·³è¡¨</span>
            <span class="post-date" title="2024-08-07 10:27:53">2024/08/07</span>
        </a>
        
        
        <a  class="All C/C++ "
           href="/2024/08/06/c-11%E6%96%B0%E7%89%B9%E6%80%A7/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="c++11æ–°ç‰¹æ€§">c++11æ–°ç‰¹æ€§</span>
            <span class="post-date" title="2024-08-06 18:50:24">2024/08/06</span>
        </a>
        
        
        <a  class="All C/C++ "
           href="/2024/08/05/c-11%E7%B1%BB%E5%9E%8B%E5%BC%BA%E5%88%B6%E8%BD%AC%E6%8D%A2/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="c++11ç±»å‹å¼ºåˆ¶è½¬æ¢">c++11ç±»å‹å¼ºåˆ¶è½¬æ¢</span>
            <span class="post-date" title="2024-08-05 21:53:46">2024/08/05</span>
        </a>
        
        
        <a  class="All C/C++ "
           href="/2024/08/05/c-%E7%9A%84const/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="c++çš„const">c++çš„const</span>
            <span class="post-date" title="2024-08-05 21:49:15">2024/08/05</span>
        </a>
        
        
        <a  class="All "
           href="/2024/08/05/cmp%E6%8A%A5%E9%94%99/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="cmpæŠ¥é”™">cmpæŠ¥é”™</span>
            <span class="post-date" title="2024-08-05 21:30:27">2024/08/05</span>
        </a>
        
        
        <a  class="All C/C++ "
           href="/2024/08/05/C-11%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="C++11æ™ºèƒ½æŒ‡é’ˆ">C++11æ™ºèƒ½æŒ‡é’ˆ</span>
            <span class="post-date" title="2024-08-05 16:58:34">2024/08/05</span>
        </a>
        
        
        <a  class="All "
           href="/2024/07/29/%E6%B6%88%E6%81%AF%E9%AA%8C%E8%AF%81%E7%A0%81%E5%92%8C%E6%95%B0%E5%AD%97%E7%AD%BE%E5%90%8D/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="æ¶ˆæ¯éªŒè¯ç å’Œæ•°å­—ç­¾å">æ¶ˆæ¯éªŒè¯ç å’Œæ•°å­—ç­¾å</span>
            <span class="post-date" title="2024-07-29 20:02:34">2024/07/29</span>
        </a>
        
        
        <a  class="All "
           href="/2024/07/29/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="è®¾è®¡æ¨¡å¼">è®¾è®¡æ¨¡å¼</span>
            <span class="post-date" title="2024-07-29 10:29:57">2024/07/29</span>
        </a>
        
        
        <a  class="All "
           href="/2024/07/26/Linux%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Linuxé…ç½®ç¯å¢ƒå˜é‡">Linuxé…ç½®ç¯å¢ƒå˜é‡</span>
            <span class="post-date" title="2024-07-26 20:05:24">2024/07/26</span>
        </a>
        
        
        <a  class="All C/C++ "
           href="/2024/05/06/c-11%E7%BA%BF%E7%A8%8B%E5%BA%93/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="c++11çº¿ç¨‹åº“">c++11çº¿ç¨‹åº“</span>
            <span class="post-date" title="2024-05-06 18:32:10">2024/05/06</span>
        </a>
        
        
        <a  class="All C/C++ "
           href="/2024/05/06/c-11%E4%BA%92%E6%96%A5%E4%BD%93/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="c++11äº’æ–¥ä½“">c++11äº’æ–¥ä½“</span>
            <span class="post-date" title="2024-05-06 17:46:53">2024/05/06</span>
        </a>
        
        
        <a  class="All "
           href="/2024/03/02/redis/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="redisæ•°æ®åº“å­˜å–ç»“æ„ä½“æ•°ç»„æ•°æ®">redisæ•°æ®åº“å­˜å–ç»“æ„ä½“æ•°ç»„æ•°æ®</span>
            <span class="post-date" title="2024-03-02 18:23:42">2024/03/02</span>
        </a>
        
        
        <a  class="All "
           href="/2024/02/01/127%E6%8A%A5%E9%94%99/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="è§£å†³spawn-fcgi:child exited with:127æŠ¥é”™">è§£å†³spawn-fcgi:child exited with:127æŠ¥é”™</span>
            <span class="post-date" title="2024-02-01 13:53:22">2024/02/01</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="Toggle full screen shortcut key s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-linux-selectå’Œepoll" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">linux-selectå’Œepoll</h1>
    
    <div class="article-meta">
        
        
        
        
    </div>
    <div class="article-meta">
        
            Created At : <time class="date" title='Updated At: 2024-08-14 21:31:10'>2024-08-14 21:09</time>
        
    </div>
    <div class="article-meta">
        
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B7%E4%BD%93%E6%8A%80%E6%9C%AF"><span class="toc-text">å…·ä½“æŠ€æœ¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-text">1. åŸºæœ¬æ¦‚å¿µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B"><span class="toc-text">2. å‡½æ•°åŸå‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><span class="toc-text">3. ä½¿ç”¨æ­¥éª¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%AE%80%E5%8D%95%E7%A4%BA%E4%BE%8B"><span class="toc-text">4. ç®€å•ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%B8%B8%E8%A7%81%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">5. å¸¸è§åº”ç”¨åœºæ™¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-text">6. ä¼˜ç¼ºç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text">æ€»ç»“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5-1"><span class="toc-text">1. åŸºæœ¬æ¦‚å¿µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B%E4%B8%8E%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><span class="toc-text">2. å‡½æ•°åŸå‹ä¸ä½¿ç”¨æ­¥éª¤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-epoll-create"><span class="toc-text">2.1 epoll_create</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-epoll-ctl"><span class="toc-text">2.2 epoll_ctl</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-epoll-wait"><span class="toc-text">2.3 epoll_wait</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F"><span class="toc-text">3. å·¥ä½œæ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-epoll-%E7%9A%84%E4%BC%98%E7%82%B9"><span class="toc-text">4. epoll çš„ä¼˜ç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%B8%B8%E8%A7%81%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-1"><span class="toc-text">5. å¸¸è§åº”ç”¨åœºæ™¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="toc-text">6. ç¤ºä¾‹ä»£ç </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-epoll-%E7%9A%84%E7%BC%BA%E7%82%B9"><span class="toc-text">7. epoll çš„ç¼ºç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-1"><span class="toc-text">æ€»ç»“</span></a></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>IOå¤šè·¯å¤ç”¨æŠ€æœ¯ä¸»è¦ä¸ºäº†è§£å†³åœ¨ç½‘ç»œç¼–ç¨‹ä¸­å¤„ç†å¤§é‡å¹¶å‘è¿æ¥æ—¶é‡åˆ°çš„é—®é¢˜ã€‚ä¸‹é¢æ˜¯IOå¤šè·¯å¤ç”¨æŠ€æœ¯æ‰€è§£å†³çš„å…³é”®é—®é¢˜ï¼š</p>
<ol>
<li><p><strong>æ€§èƒ½ç“¶é¢ˆ</strong>ï¼š</p>
<ul>
<li>åœ¨ä¼ ç»Ÿçš„ç½‘ç»œç¼–ç¨‹æ¨¡å‹ä¸­ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯è¿æ¥éƒ½éœ€è¦ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹æˆ–è¿›ç¨‹æ¥å¤„ç†ã€‚</li>
<li>å½“å®¢æˆ·ç«¯è¿æ¥æ•°é‡éå¸¸å¤§æ—¶ï¼Œè¿™ç§æ¨¡å‹ä¼šå¯¼è‡´å¤§é‡çš„çº¿ç¨‹æˆ–è¿›ç¨‹å¼€é”€ï¼ŒåŒ…æ‹¬ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œå†…å­˜ç®¡ç†ç­‰ã€‚</li>
</ul>
</li>
<li><p><strong>èµ„æºç®¡ç†</strong>ï¼š</p>
<ul>
<li>ä¼ ç»Ÿæ¨¡å‹ä¸­çš„æ¯ä¸ªè¿æ¥éƒ½éœ€è¦ä¸€ä¸ªçº¿ç¨‹æˆ–è¿›ç¨‹ï¼Œè¿™ä¼šå¯¼è‡´è¾ƒé«˜çš„å†…å­˜å’ŒCPUä½¿ç”¨ç‡ã€‚</li>
<li>åœ¨å¤šè·¯å¤ç”¨æ¨¡å‹ä¸­ï¼Œå¯ä»¥ä½¿ç”¨è¾ƒå°‘çš„çº¿ç¨‹æˆ–è¿›ç¨‹æ¥å¤„ç†å¤§é‡çš„è¿æ¥ï¼Œä»è€Œæ›´æœ‰æ•ˆåœ°åˆ©ç”¨èµ„æºã€‚</li>
</ul>
</li>
<li><p><strong>å¹¶å‘è¿æ¥çš„å¤„ç†</strong>ï¼š</p>
<ul>
<li>ä¼ ç»Ÿæ¨¡å‹éš¾ä»¥æœ‰æ•ˆå¤„ç†å¤§é‡å¹¶å‘è¿æ¥ï¼Œå› ä¸ºæ¯ä¸ªè¿æ¥éƒ½éœ€è¦ç‹¬ç«‹çš„çº¿ç¨‹æˆ–è¿›ç¨‹ã€‚</li>
<li>å¤šè·¯å¤ç”¨æŠ€æœ¯å…è®¸ä¸€ä¸ªçº¿ç¨‹æˆ–è¿›ç¨‹åŒæ—¶ç›‘å¬å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼ˆé€šå¸¸æ˜¯ç½‘ç»œå¥—æ¥å­—ï¼‰ï¼Œä»è€Œå¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªè¿æ¥ã€‚</li>
</ul>
</li>
<li><p><strong>é¿å…è½®è¯¢</strong>ï¼š</p>
<ul>
<li>åœ¨æ²¡æœ‰å¤šè·¯å¤ç”¨çš„æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨å¯èƒ½éœ€è¦ä¸æ–­è½®è¯¢æ¯ä¸ªè¿æ¥çš„çŠ¶æ€ï¼Œä»¥æ£€æŸ¥æ˜¯å¦æœ‰æ•°æ®å¯ä»¥è¯»å–æˆ–å†™å…¥ã€‚</li>
<li>å¤šè·¯å¤ç”¨æŠ€æœ¯å…è®¸æœåŠ¡å™¨ç­‰å¾…ä¸€ç»„æ–‡ä»¶æè¿°ç¬¦ä¸­çš„ä»»æ„ä¸€ä¸ªæˆ–å¤šä¸ªå˜ä¸ºå°±ç»ªçŠ¶æ€ï¼Œè€Œä¸æ˜¯ä¸æ–­è½®è¯¢ã€‚</li>
</ul>
</li>
<li><p><strong>æé«˜æ€§èƒ½</strong>ï¼š</p>
<ul>
<li>é€šè¿‡å‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œè½®è¯¢ï¼Œå¤šè·¯å¤ç”¨æŠ€æœ¯å¯ä»¥æ˜¾è‘—æé«˜æœåŠ¡å™¨å¤„ç†å¤§é‡å¹¶å‘è¿æ¥çš„èƒ½åŠ›ã€‚</li>
<li>è¿™ç§æ–¹æ³•å¯ä»¥é™ä½CPUå’Œå†…å­˜çš„ä½¿ç”¨ç‡ï¼Œæé«˜ç³»ç»Ÿçš„å“åº”æ—¶é—´å’Œååé‡ã€‚</li>
</ul>
</li>
</ol>
<h3 id="å…·ä½“æŠ€æœ¯"><a href="#å…·ä½“æŠ€æœ¯" class="headerlink" title="å…·ä½“æŠ€æœ¯"></a>å…·ä½“æŠ€æœ¯</h3><p>ä¸€äº›å¸¸ç”¨çš„IOå¤šè·¯å¤ç”¨æŠ€æœ¯åŒ…æ‹¬ï¼š</p>
<ul>
<li><p><strong><code>select</code></strong>ï¼š</p>
<ul>
<li><code>select</code> æ˜¯æœ€æ—©çš„å¤šè·¯å¤ç”¨æŠ€æœ¯ä¹‹ä¸€ï¼Œå®ƒå…è®¸åŒæ—¶ç›‘å¬å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚</li>
<li>å®ƒæœ‰ä¸€ä¸ªé™åˆ¶ï¼Œå³æœ€å¤šåªèƒ½ç›‘å¬ FD_SETSIZE ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼ˆé€šå¸¸æ˜¯ 1024ï¼‰ã€‚</li>
</ul>
</li>
<li><p><strong><code>poll</code></strong>ï¼š</p>
<ul>
<li><code>poll</code> ç±»ä¼¼äº <code>select</code>ï¼Œä½†æ˜¯æ²¡æœ‰æ–‡ä»¶æè¿°ç¬¦æ•°é‡çš„é™åˆ¶ã€‚</li>
<li><code>poll</code> ä»ç„¶ä½¿ç”¨è½®è¯¢çš„æ–¹å¼æ£€æŸ¥æ–‡ä»¶æè¿°ç¬¦çš„çŠ¶æ€ï¼Œä½†å®ƒçš„æ•ˆç‡é€šå¸¸é«˜äº <code>select</code>ã€‚</li>
</ul>
</li>
<li><p><strong><code>epoll</code></strong>ï¼š</p>
<ul>
<li><code>epoll</code> æ˜¯ Linux å†…æ ¸ä¸­çš„ä¸€ç§é«˜æ•ˆçš„å¤šè·¯å¤ç”¨æŠ€æœ¯ã€‚</li>
<li>å®ƒä½¿ç”¨è¾¹ç¼˜è§¦å‘ï¼ˆedge-triggeredï¼‰å’Œæ°´å¹³è§¦å‘ï¼ˆlevel-triggeredï¼‰æ¨¡å¼æ¥æé«˜æ€§èƒ½ã€‚</li>
<li><code>epoll</code> ä½¿ç”¨çº¢é»‘æ ‘ç­‰æ•°æ®ç»“æ„æ¥é«˜æ•ˆåœ°ç®¡ç†æ–‡ä»¶æè¿°ç¬¦ã€‚</li>
</ul>
</li>
<li><p><strong><code>kqueue</code></strong>ï¼š</p>
<ul>
<li><code>kqueue</code> æ˜¯ BSD ç³»ç»Ÿä¸­çš„å¤šè·¯å¤ç”¨æŠ€æœ¯ã€‚</li>
<li>å®ƒæä¾›äº†ç±»ä¼¼äº <code>epoll</code> çš„åŠŸèƒ½ï¼Œä½†åœ¨ BSD ç³»ç»Ÿä¸­æ›´ä¸ºå¸¸è§ã€‚</li>
</ul>
</li>
</ul>
<p><code>select</code> æ˜¯ä¸€ç§ç”¨äºå¤šè·¯å¤ç”¨ I&#x2F;O æ“ä½œçš„ç³»ç»Ÿè°ƒç”¨ï¼Œåœ¨å¤„ç†å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦æ—¶éå¸¸æœ‰ç”¨ã€‚å®ƒå…è®¸ç¨‹åºåœ¨ç­‰å¾…å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦çš„çŠ¶æ€å˜åŒ–æ—¶é˜»å¡ï¼Œä»è€Œåœ¨ç½‘ç»œç¼–ç¨‹å’Œå¹¶å‘ I&#x2F;O æ“ä½œä¸­å¹¿æ³›åº”ç”¨ã€‚</p>
<h3 id="1-åŸºæœ¬æ¦‚å¿µ"><a href="#1-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1. åŸºæœ¬æ¦‚å¿µ"></a>1. <strong>åŸºæœ¬æ¦‚å¿µ</strong></h3><ul>
<li><strong>å¤šè·¯å¤ç”¨ I&#x2F;O</strong>: åœ¨ç½‘ç»œç¼–ç¨‹ä¸­ï¼Œé€šå¸¸éœ€è¦åŒæ—¶å¤„ç†å¤šä¸ª I&#x2F;O æ“ä½œï¼Œå¦‚ç›‘è§†å¤šä¸ªå¥—æ¥å­—çš„çŠ¶æ€ã€‚<code>select</code> å…è®¸ç¨‹åºåŒæ—¶ç­‰å¾…å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦çš„çŠ¶æ€å˜åŒ–ï¼Œå¦‚è¯»ã€å†™æˆ–å¼‚å¸¸æƒ…å†µï¼Œè€Œä¸å¿…ä¸ºæ¯ä¸ªæ–‡ä»¶æè¿°ç¬¦åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ã€‚</li>
<li><strong>æ–‡ä»¶æè¿°ç¬¦ï¼ˆFile Descriptorï¼‰</strong>: åœ¨UNIX&#x2F;Linuxç³»ç»Ÿä¸­ï¼Œæ–‡ä»¶æè¿°ç¬¦æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ‰“å¼€çš„æ–‡ä»¶ã€å¥—æ¥å­—æˆ–å…¶ä»–I&#x2F;Oèµ„æºã€‚</li>
</ul>
<h3 id="2-å‡½æ•°åŸå‹"><a href="#2-å‡½æ•°åŸå‹" class="headerlink" title="2. å‡½æ•°åŸå‹"></a>2. <strong>å‡½æ•°åŸå‹</strong></h3><pre><code class="language-c">#include &lt;sys/select.h&gt;
#include &lt;sys/time.h&gt;
#include &lt;unistd.h&gt;

int select(int nfds, fd_set *readfds, fd_set *writefds, fd_set *exceptfds, struct timeval *timeout);
</code></pre>
<ul>
<li><p><code>nfds</code>: éœ€è¦ç›‘è§†çš„æ–‡ä»¶æè¿°ç¬¦çš„æ•°é‡ã€‚é€šå¸¸è®¾ç½®ä¸ºæ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦ä¸­æœ€å¤§å€¼åŠ 1ã€‚</p>
</li>
<li><p><code>readfds</code>: æŒ‡å‘ <code>fd_set</code> ç»“æ„ä½“çš„æŒ‡é’ˆï¼Œç”¨äºç›‘è§†å¯è¯»çš„æ–‡ä»¶æè¿°ç¬¦é›†åˆã€‚</p>
</li>
<li><p><code>writefds</code>: æŒ‡å‘ <code>fd_set</code> ç»“æ„ä½“çš„æŒ‡é’ˆï¼Œç”¨äºç›‘è§†å¯å†™çš„æ–‡ä»¶æè¿°ç¬¦é›†åˆã€‚</p>
</li>
<li><p><code>exceptfds</code>: æŒ‡å‘ <code>fd_set</code> ç»“æ„ä½“çš„æŒ‡é’ˆï¼Œç”¨äºç›‘è§†å¼‚å¸¸çŠ¶æ€çš„æ–‡ä»¶æè¿°ç¬¦é›†åˆã€‚</p>
</li>
<li><p><code>timeout</code>: æŒ‡å‘ <code>timeval</code> ç»“æ„ä½“çš„æŒ‡é’ˆï¼Œè¡¨ç¤ºç­‰å¾…çš„è¶…æ—¶æ—¶é—´ã€‚å¦‚æœ <code>timeout</code> ä¸º <code>NULL</code>ï¼Œåˆ™ <code>select</code> ä¼šæ— é™æœŸåœ°é˜»å¡ç›´åˆ°æœ‰æ–‡ä»¶æè¿°ç¬¦å‘ç”Ÿå˜åŒ–ã€‚</p>
</li>
<li><p><strong>è¿”å›å€¼</strong>:</p>
<ul>
<li>æˆåŠŸæ—¶ï¼Œè¿”å›å€¼ä¸ºæ–‡ä»¶æè¿°ç¬¦é›†åˆä¸­å‘ç”Ÿå˜åŒ–çš„æ–‡ä»¶æè¿°ç¬¦æ•°é‡ã€‚</li>
<li>å¦‚æœè¶…æ—¶è¿”å›ï¼Œè¿”å›å€¼ä¸º 0ã€‚</li>
<li>å¦‚æœå‡ºé”™ï¼Œè¿”å›å€¼ä¸º -1ï¼Œä¸” <code>errno</code> è¢«è®¾ç½®ä¸ºé€‚å½“çš„é”™è¯¯ä»£ç ã€‚</li>
</ul>
</li>
</ul>
<h3 id="3-ä½¿ç”¨æ­¥éª¤"><a href="#3-ä½¿ç”¨æ­¥éª¤" class="headerlink" title="3. ä½¿ç”¨æ­¥éª¤"></a>3. <strong>ä½¿ç”¨æ­¥éª¤</strong></h3><ol>
<li><strong>è®¾ç½®æ–‡ä»¶æè¿°ç¬¦é›†</strong>: ä½¿ç”¨ <code>FD_ZERO</code> æ¸…ç©ºæ–‡ä»¶æè¿°ç¬¦é›†ï¼Œç„¶åä½¿ç”¨ <code>FD_SET</code> å°†éœ€è¦ç›‘è§†çš„æ–‡ä»¶æè¿°ç¬¦åŠ å…¥é›†åˆä¸­ã€‚</li>
<li><strong>è°ƒç”¨ <code>select</code></strong>: ä¼ é€’æ–‡ä»¶æè¿°ç¬¦é›†åˆï¼Œ<code>select</code> å°†é˜»å¡ç›´åˆ°è‡³å°‘ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œæˆ–è¶…æ—¶æ—¶é—´åˆ°ã€‚</li>
<li><strong>æ£€æŸ¥ç»“æœ</strong>: ä½¿ç”¨ <code>FD_ISSET</code> æ£€æŸ¥å“ªäº›æ–‡ä»¶æè¿°ç¬¦å‘ç”Ÿäº†çŠ¶æ€å˜åŒ–ï¼Œç„¶åå¤„ç†ç›¸åº”çš„ I&#x2F;O æ“ä½œã€‚</li>
<li><strong>å¤„ç†è¶…æ—¶</strong>: å¦‚æœ <code>select</code> è¿”å› 0ï¼Œè¡¨ç¤ºå·²è¶…æ—¶ï¼Œå¯ä»¥æ ¹æ®åº”ç”¨éœ€è¦å¤„ç†è¿™ä¸ªæƒ…å†µã€‚</li>
</ol>
<h3 id="4-ç®€å•ç¤ºä¾‹"><a href="#4-ç®€å•ç¤ºä¾‹" class="headerlink" title="4. ç®€å•ç¤ºä¾‹"></a>4. <strong>ç®€å•ç¤ºä¾‹</strong></h3><p>   ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ <code>select</code> ç›‘è§†æ ‡å‡†è¾“å…¥å’Œä¸€ä¸ªå¥—æ¥å­—çš„å¯è¯»æ€§ï¼š</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;sys/select.h&gt;
#include &lt;sys/time.h&gt;
#include &lt;unistd.h&gt;

int main() &#123;
    fd_set readfds;
    struct timeval timeout;
    int retval;

    FD_ZERO(&amp;readfds);  // æ¸…ç©ºæ–‡ä»¶æè¿°ç¬¦é›†
    FD_SET(STDIN_FILENO, &amp;readfds);  // ç›‘è§†æ ‡å‡†è¾“å…¥

    timeout.tv_sec = 5;  // è¶…æ—¶ç­‰å¾…5ç§’
    timeout.tv_usec = 0;

    retval = select(STDIN_FILENO + 1, &amp;readfds, NULL, NULL, &amp;timeout);

    if (retval == -1) &#123;
        perror(&quot;select()&quot;);
    &#125; else if (retval) &#123;
        printf(&quot;Data is available now.\n&quot;);
        if (FD_ISSET(STDIN_FILENO, &amp;readfds)) &#123;
            char buffer[100];
            read(STDIN_FILENO, buffer, sizeof(buffer));
            printf(&quot;Input: %s\n&quot;, buffer);
        &#125;
    &#125; else &#123;
        printf(&quot;No data within five seconds.\n&quot;);
    &#125;

    return 0;
&#125;
</code></pre>
<h3 id="5-å¸¸è§åº”ç”¨åœºæ™¯"><a href="#5-å¸¸è§åº”ç”¨åœºæ™¯" class="headerlink" title="5. å¸¸è§åº”ç”¨åœºæ™¯"></a>5. <strong>å¸¸è§åº”ç”¨åœºæ™¯</strong></h3><ul>
<li><strong>ç½‘ç»œæœåŠ¡å™¨</strong>: åœ¨æœåŠ¡å™¨ç«¯åŒæ—¶å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯è¿æ¥æ—¶ï¼Œ<code>select</code> å¯ä»¥ç”¨äºç›‘è§†å¤šä¸ªå®¢æˆ·ç«¯å¥—æ¥å­—çš„è¯»å†™çŠ¶æ€ã€‚</li>
<li><strong>å¹¶å‘ I&#x2F;O</strong>: åœ¨ä¸ä½¿ç”¨å¤šçº¿ç¨‹æˆ–å¤šè¿›ç¨‹çš„æƒ…å†µä¸‹ï¼Œ<code>select</code> å¯ä»¥å¸®åŠ©å¤„ç†å¤šä¸ª I&#x2F;O è®¾å¤‡ï¼Œå¦‚æ–‡ä»¶ã€å¥—æ¥å­—æˆ–ç®¡é“ã€‚</li>
<li><strong>è¶…æ—¶æ§åˆ¶</strong>: <code>select</code> å…è®¸ç¨‹åºåœ¨ç­‰å¾… I&#x2F;O æ“ä½œæ—¶è®¾ç½®è¶…æ—¶ï¼Œä»¥é¿å…é•¿æ—¶é—´é˜»å¡ã€‚</li>
</ul>
<h3 id="6-ä¼˜ç¼ºç‚¹"><a href="#6-ä¼˜ç¼ºç‚¹" class="headerlink" title="6. ä¼˜ç¼ºç‚¹"></a>6. <strong>ä¼˜ç¼ºç‚¹</strong></h3><ul>
<li><strong>ä¼˜ç‚¹</strong>:<ul>
<li>ç®€å•æ˜“ç”¨ï¼Œè·¨å¹³å°æ”¯æŒè‰¯å¥½ã€‚</li>
<li>æ— éœ€åˆ›å»ºå¤§é‡çº¿ç¨‹æˆ–è¿›ç¨‹ï¼ŒèŠ‚çœèµ„æºã€‚</li>
</ul>
</li>
<li><strong>ç¼ºç‚¹</strong>:<ul>
<li><code>select</code> çš„æ€§èƒ½åœ¨å¤§é‡æ–‡ä»¶æè¿°ç¬¦ï¼ˆé€šå¸¸è¶…è¿‡1024ä¸ªï¼‰æ—¶ä¼šæ˜¾è‘—ä¸‹é™ã€‚</li>
<li>æ¯æ¬¡è°ƒç”¨ <code>select</code> éƒ½éœ€è¦é‡æ–°è®¾ç½®æ–‡ä»¶æè¿°ç¬¦é›†åˆï¼Œæ•ˆç‡è¾ƒä½ã€‚</li>
</ul>
</li>
</ul>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h3><p><code>select</code> æ˜¯ä¸€ä¸ªåœ¨ç½‘ç»œç¼–ç¨‹å’Œå¹¶å‘ I&#x2F;O ä¸­å¹¿æ³›ä½¿ç”¨çš„ç³»ç»Ÿè°ƒç”¨ï¼Œé€šè¿‡ç›‘è§†å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦çš„çŠ¶æ€å˜åŒ–æ¥å®ç° I&#x2F;O å¤šè·¯å¤ç”¨ã€‚è™½ç„¶ <code>select</code> åœ¨å¤„ç†å°‘é‡æ–‡ä»¶æè¿°ç¬¦æ—¶è¡¨ç°è‰¯å¥½ï¼Œä½†åœ¨å¤„ç†å¤§é‡æ–‡ä»¶æè¿°ç¬¦æ—¶æ€§èƒ½è¾ƒå·®ï¼Œå› æ­¤åœ¨ç°ä»£åº”ç”¨ä¸­ï¼Œ<code>poll</code> å’Œ <code>epoll</code> ç­‰æ›¿ä»£æ–¹æ¡ˆå¯èƒ½æ›´åˆé€‚ã€‚</p>
<p><code>epoll</code> æ˜¯ Linux å†…æ ¸æä¾›çš„ä¸€ç§é«˜æ•ˆçš„ I&#x2F;O å¤šè·¯å¤ç”¨æœºåˆ¶ï¼Œç›¸æ¯”äºä¼ ç»Ÿçš„ <code>select</code> å’Œ <code>poll</code>ï¼Œ<code>epoll</code> èƒ½å¤Ÿæ›´é«˜æ•ˆåœ°å¤„ç†å¤§é‡å¹¶å‘è¿æ¥ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§è§„æ¨¡ç½‘ç»œæœåŠ¡æ—¶è¡¨ç°å‡ºè‰²ã€‚</p>
<h3 id="1-åŸºæœ¬æ¦‚å¿µ-1"><a href="#1-åŸºæœ¬æ¦‚å¿µ-1" class="headerlink" title="1. åŸºæœ¬æ¦‚å¿µ"></a>1. <strong>åŸºæœ¬æ¦‚å¿µ</strong></h3><ul>
<li><strong>I&#x2F;O å¤šè·¯å¤ç”¨</strong>: å…è®¸ç¨‹åºåŒæ—¶ç›‘è§†å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦çš„ I&#x2F;O äº‹ä»¶ï¼Œå¹¶åœ¨ä»»ä¸€æ–‡ä»¶æè¿°ç¬¦å°±ç»ªæ—¶è¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚è¿™ç§æœºåˆ¶åœ¨ç½‘ç»œæœåŠ¡å™¨ã€äº‹ä»¶é©±åŠ¨çš„åº”ç”¨ç¨‹åºä¸­å¹¿æ³›ä½¿ç”¨ã€‚</li>
<li><strong>epoll</strong>: <code>epoll</code> æ˜¯ Linux æä¾›çš„ I&#x2F;O å¤šè·¯å¤ç”¨æ¥å£ï¼Œå…·æœ‰é«˜æ•ˆçš„äº‹ä»¶é€šçŸ¥æœºåˆ¶ï¼Œé€šè¿‡å‡å°‘å†…æ ¸ä¸ç”¨æˆ·ç©ºé—´çš„åˆ‡æ¢æ¬¡æ•°ä»¥åŠä¼˜åŒ–æ•°æ®ç»“æ„æ¥æå‡æ€§èƒ½ã€‚</li>
</ul>
<h3 id="2-å‡½æ•°åŸå‹ä¸ä½¿ç”¨æ­¥éª¤"><a href="#2-å‡½æ•°åŸå‹ä¸ä½¿ç”¨æ­¥éª¤" class="headerlink" title="2. å‡½æ•°åŸå‹ä¸ä½¿ç”¨æ­¥éª¤"></a>2. <strong>å‡½æ•°åŸå‹ä¸ä½¿ç”¨æ­¥éª¤</strong></h3><p>   <code>epoll</code> ä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªç³»ç»Ÿè°ƒç”¨ï¼š<code>epoll_create</code>ã€<code>epoll_ctl</code> å’Œ <code>epoll_wait</code>ã€‚</p>
<h4 id="2-1-epoll-create"><a href="#2-1-epoll-create" class="headerlink" title="2.1 epoll_create"></a>2.1 <strong>epoll_create</strong></h4><pre><code class="language-c">int epoll_create(int size);
</code></pre>
<ul>
<li><strong>å‚æ•°</strong>:<ul>
<li><code>size</code>: åœ¨ Linux 2.6.8 ä¹‹å‰ï¼Œæ­¤å‚æ•°ç”¨äºå»ºè®®å†…æ ¸åˆå§‹åˆ†é…çš„ç©ºé—´å¤§å°ã€‚ç°åœ¨å·²è¢«å¿½ç•¥ï¼Œä½†å¿…é¡»å¤§äºé›¶ã€‚</li>
</ul>
</li>
<li><strong>è¿”å›å€¼</strong>:<ul>
<li>æˆåŠŸæ—¶è¿”å› <code>epoll</code> å®ä¾‹çš„æ–‡ä»¶æè¿°ç¬¦ã€‚</li>
<li>å¤±è´¥æ—¶è¿”å› -1ï¼Œå¹¶è®¾ç½® <code>errno</code>ã€‚</li>
</ul>
</li>
<li><strong>è¯´æ˜</strong>: <code>epoll_create</code> ç”¨äºåˆ›å»ºä¸€ä¸ª <code>epoll</code> å®ä¾‹ï¼Œè¯¥å®ä¾‹ç”¨äºç®¡ç†å°†è¦ç›‘è§†çš„æ–‡ä»¶æè¿°ç¬¦é›†åˆã€‚</li>
</ul>
<p>   <strong>ç¤ºä¾‹</strong>:</p>
<pre><code class="language-c">int epfd = epoll_create(1);
if (epfd == -1) &#123;
    perror(&quot;epoll_create&quot;);
    exit(EXIT_FAILURE);
&#125;
</code></pre>
<h4 id="2-2-epoll-ctl"><a href="#2-2-epoll-ctl" class="headerlink" title="2.2 epoll_ctl"></a>2.2 <strong>epoll_ctl</strong></h4><pre><code class="language-c">int epoll_ctl(int epfd, int op, int fd, struct epoll_event *event);
</code></pre>
<ul>
<li><strong>å‚æ•°</strong>:<ul>
<li><code>epfd</code>: <code>epoll</code> å®ä¾‹çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œç”± <code>epoll_create</code> è¿”å›ã€‚</li>
<li><code>op</code>: è¡¨ç¤ºæ“ä½œç±»å‹ï¼ŒåŒ…æ‹¬ <code>EPOLL_CTL_ADD</code>ï¼ˆæ³¨å†Œæ–°çš„ fd åˆ° epollï¼‰ã€<code>EPOLL_CTL_MOD</code>ï¼ˆä¿®æ”¹å·²æ³¨å†Œ fd çš„ç›‘å¬äº‹ä»¶ï¼‰ã€<code>EPOLL_CTL_DEL</code>ï¼ˆä» epoll ä¸­åˆ é™¤ä¸€ä¸ª fdï¼‰ã€‚</li>
<li><code>fd</code>: éœ€è¦æ“ä½œçš„æ–‡ä»¶æè¿°ç¬¦ã€‚</li>
<li><code>event</code>: æŒ‡å‘ <code>epoll_event</code> ç»“æ„ä½“çš„æŒ‡é’ˆï¼Œæè¿°ç›‘å¬çš„äº‹ä»¶ç±»å‹å’Œå…³è”çš„æ•°æ®ã€‚</li>
</ul>
</li>
<li><strong>è¿”å›å€¼</strong>:<ul>
<li>æˆåŠŸæ—¶è¿”å› 0ã€‚</li>
<li>å¤±è´¥æ—¶è¿”å› -1ï¼Œå¹¶è®¾ç½® <code>errno</code>ã€‚</li>
</ul>
</li>
</ul>
<p>   <strong>ç¤ºä¾‹</strong>:</p>
<pre><code class="language-c">struct epoll_event event;
event.events = EPOLLIN;  // ç›‘å¬å¯è¯»äº‹ä»¶
event.data.fd = sockfd;  // è®¾ç½®äº‹ä»¶å…³è”çš„æ–‡ä»¶æè¿°ç¬¦

if (epoll_ctl(epfd, EPOLL_CTL_ADD, sockfd, &amp;event) == -1) &#123;
    perror(&quot;epoll_ctl: sockfd&quot;);
    exit(EXIT_FAILURE);
&#125;
</code></pre>
<h4 id="2-3-epoll-wait"><a href="#2-3-epoll-wait" class="headerlink" title="2.3 epoll_wait"></a>2.3 <strong>epoll_wait</strong></h4><pre><code class="language-c">int epoll_wait(int epfd, struct epoll_event *events, int maxevents, int timeout);
</code></pre>
<ul>
<li><strong>å‚æ•°</strong>:<ul>
<li><code>epfd</code>: <code>epoll</code> å®ä¾‹çš„æ–‡ä»¶æè¿°ç¬¦ã€‚</li>
<li><code>events</code>: ç”¨äºå­˜å‚¨ä»å†…æ ¸å¾—åˆ°çš„äº‹ä»¶çš„æ•°ç»„ã€‚</li>
<li><code>maxevents</code>: æ¯æ¬¡è°ƒç”¨æœ€å¤šè¿”å›çš„äº‹ä»¶æ•°ã€‚è¿™ä¸ªå€¼å¿…é¡»å¤§äº 0ã€‚</li>
<li><code>timeout</code>: ç­‰å¾…äº‹ä»¶å‘ç”Ÿçš„è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ã€‚-1 è¡¨ç¤ºæ— é™ç­‰å¾…ï¼Œ0 è¡¨ç¤ºç«‹å³è¿”å›ã€‚</li>
</ul>
</li>
<li><strong>è¿”å›å€¼</strong>:<ul>
<li>æˆåŠŸæ—¶è¿”å›å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦æ•°é‡ã€‚</li>
<li>è¶…æ—¶è¿”å› 0ã€‚</li>
<li>å¤±è´¥æ—¶è¿”å› -1ï¼Œå¹¶è®¾ç½® <code>errno</code>ã€‚</li>
</ul>
</li>
</ul>
<p>   <strong>ç¤ºä¾‹</strong>:</p>
<pre><code class="language-c">struct epoll_event events[MAX_EVENTS];
int nfds = epoll_wait(epfd, events, MAX_EVENTS, -1);
if (nfds == -1) &#123;
    perror(&quot;epoll_wait&quot;);
    exit(EXIT_FAILURE);
&#125;

for (int n = 0; n &lt; nfds; ++n) &#123;
    if (events[n].events &amp; EPOLLIN) &#123;
        // å¤„ç†å¯è¯»äº‹ä»¶
    &#125;
&#125;
</code></pre>
<h3 id="3-å·¥ä½œæ¨¡å¼"><a href="#3-å·¥ä½œæ¨¡å¼" class="headerlink" title="3. å·¥ä½œæ¨¡å¼"></a>3. <strong>å·¥ä½œæ¨¡å¼</strong></h3><p>   <code>epoll</code> å…·æœ‰ä¸¤ç§ä¸»è¦çš„å·¥ä½œæ¨¡å¼ï¼š</p>
<ul>
<li><strong>æ°´å¹³è§¦å‘ï¼ˆLevel Triggered, LTï¼‰</strong>:<ul>
<li>é»˜è®¤å·¥ä½œæ¨¡å¼ï¼Œç±»ä¼¼äº <code>select</code> å’Œ <code>poll</code> çš„è¡Œä¸ºã€‚å½“æ–‡ä»¶æè¿°ç¬¦å°±ç»ªæ—¶ï¼Œä¼šæŒç»­é€šçŸ¥ï¼Œç›´åˆ°äº‹ä»¶è¢«å¤„ç†ã€‚</li>
</ul>
</li>
<li><strong>è¾¹ç¼˜è§¦å‘ï¼ˆEdge Triggered, ETï¼‰</strong>:<ul>
<li>é«˜æ•ˆæ¨¡å¼ï¼Œä»…å½“æ–‡ä»¶æè¿°ç¬¦ä»æœªå°±ç»ªå˜ä¸ºå°±ç»ªæ—¶æ‰é€šçŸ¥ä¸€æ¬¡ã€‚é€šå¸¸é…åˆéé˜»å¡ I&#x2F;O ä½¿ç”¨ï¼Œé¿å…å› æœªå¤„ç†çš„äº‹ä»¶å¯¼è‡´é«˜ CPU å ç”¨ã€‚</li>
</ul>
</li>
</ul>
<h3 id="4-epoll-çš„ä¼˜ç‚¹"><a href="#4-epoll-çš„ä¼˜ç‚¹" class="headerlink" title="4. epoll çš„ä¼˜ç‚¹"></a>4. <strong>epoll çš„ä¼˜ç‚¹</strong></h3><ul>
<li><strong>é«˜æ•ˆæ€§</strong>: <code>epoll</code> å†…éƒ¨ä½¿ç”¨çº¢é»‘æ ‘ï¼ˆç”¨äºç®¡ç†ç›‘æ§çš„æ–‡ä»¶æè¿°ç¬¦ï¼‰å’Œé“¾è¡¨ï¼ˆç”¨äºä¿å­˜å¾…å¤„ç†çš„å°±ç»ªæ–‡ä»¶æè¿°ç¬¦ï¼‰ï¼Œç›¸æ¯” <code>select</code> å’Œ <code>poll</code>ï¼Œæ— éœ€æ¯æ¬¡è°ƒç”¨æ—¶é‡æ–°éå†æ–‡ä»¶æè¿°ç¬¦åˆ—è¡¨ï¼Œå› æ­¤åœ¨å¤„ç†å¤§é‡æ–‡ä»¶æè¿°ç¬¦æ—¶æ€§èƒ½è¡¨ç°æ›´ä¼˜ã€‚</li>
<li><strong>ä¸å—æ–‡ä»¶æè¿°ç¬¦é™åˆ¶</strong>: <code>select</code> æœ‰æœ€å¤§æ–‡ä»¶æè¿°ç¬¦æ•°é‡é™åˆ¶ï¼Œè€Œ <code>epoll</code> æ²¡æœ‰è¿™ä¸€é™åˆ¶ï¼Œå› æ­¤æ›´é€‚åˆé«˜å¹¶å‘åœºæ™¯ã€‚</li>
<li><strong>äº‹ä»¶é©±åŠ¨æœºåˆ¶</strong>: è¾¹ç¼˜è§¦å‘æ¨¡å¼ä¸‹ï¼Œ<code>epoll</code> ä»…åœ¨çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶é€šçŸ¥ç”¨æˆ·ï¼Œå‡å°‘ä¸å¿…è¦çš„ç³»ç»Ÿè°ƒç”¨ã€‚</li>
</ul>
<h3 id="5-å¸¸è§åº”ç”¨åœºæ™¯-1"><a href="#5-å¸¸è§åº”ç”¨åœºæ™¯-1" class="headerlink" title="5. å¸¸è§åº”ç”¨åœºæ™¯"></a>5. <strong>å¸¸è§åº”ç”¨åœºæ™¯</strong></h3><ul>
<li><strong>é«˜å¹¶å‘ç½‘ç»œæœåŠ¡å™¨</strong>: <code>epoll</code> å¸¸ç”¨äºæ„å»ºé«˜æ€§èƒ½ç½‘ç»œæœåŠ¡å™¨ï¼Œå¦‚ Nginxã€Redis ç­‰ï¼Œèƒ½é«˜æ•ˆå¤„ç†å¤§é‡å¹¶å‘è¿æ¥ã€‚</li>
<li><strong>äº‹ä»¶é©±åŠ¨çš„ç³»ç»Ÿ</strong>: å¦‚æ¶ˆæ¯é˜Ÿåˆ—ã€äº‹ä»¶é€šçŸ¥ç³»ç»Ÿç­‰ï¼Œéœ€è¦é«˜æ•ˆç›‘æ§å¤§é‡ I&#x2F;O äº‹ä»¶çš„åœºæ™¯ã€‚</li>
</ul>
<h3 id="6-ç¤ºä¾‹ä»£ç "><a href="#6-ç¤ºä¾‹ä»£ç " class="headerlink" title="6. ç¤ºä¾‹ä»£ç "></a>6. <strong>ç¤ºä¾‹ä»£ç </strong></h3><p>   ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ <code>epoll</code> çš„ç®€å•æœåŠ¡å™¨ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨ <code>epoll</code> å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯è¿æ¥çš„ I&#x2F;O äº‹ä»¶ï¼š</p>
<pre><code class="language-c">#include &lt;sys/epoll.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;
#include &lt;string.h&gt;
#include &lt;errno.h&gt;
#include &lt;netinet/in.h&gt;

#define MAX_EVENTS 10
#define PORT 8080

int main() &#123;
    int server_fd, new_socket, epfd;
    struct sockaddr_in address;
    int addrlen = sizeof(address);

    struct epoll_event event, events[MAX_EVENTS];

    // åˆ›å»ºç›‘å¬å¥—æ¥å­—
    if ((server_fd = socket(AF_INET, SOCK_STREAM, 0)) == 0) &#123;
        perror(&quot;socket failed&quot;);
        exit(EXIT_FAILURE);
    &#125;

    address.sin_family = AF_INET;
    address.sin_addr.s_addr = INADDR_ANY;
    address.sin_port = htons(PORT);

    if (bind(server_fd, (struct sockaddr *)&amp;address, sizeof(address)) &lt; 0) &#123;
        perror(&quot;bind failed&quot;);
        exit(EXIT_FAILURE);
    &#125;
    if (listen(server_fd, 3) &lt; 0) &#123;
        perror(&quot;listen&quot;);
        exit(EXIT_FAILURE);
    &#125;

    // åˆ›å»º epoll å®ä¾‹
    epfd = epoll_create(1);
    if (epfd == -1) &#123;
        perror(&quot;epoll_create1&quot;);
        exit(EXIT_FAILURE);
    &#125;

    // å°† server_fd æ·»åŠ åˆ° epoll å®ä¾‹ä¸­
    event.events = EPOLLIN;
    event.data.fd = server_fd;
    if (epoll_ctl(epfd, EPOLL_CTL_ADD, server_fd, &amp;event) == -1) &#123;
        perror(&quot;epoll_ctl&quot;);
        exit(EXIT_FAILURE);
    &#125;

    // å¾ªç¯ç­‰å¾…äº‹ä»¶
    while (1) &#123;
        int nfds = epoll_wait(epfd, events, MAX_EVENTS, -1);
        if (nfds == -1) &#123;
            perror(&quot;epoll_wait&quot;);
            exit(EXIT_FAILURE);
        &#125;

        for (int n = 0; n &lt; nfds; ++n) &#123;
            if (events[n].data.fd == server_fd) &#123;
                // æ¥å—æ–°çš„è¿æ¥
                new_socket = accept(server_fd, (struct sockaddr *)&amp;address, (socklen_t*)&amp;addrlen);
                if (new_socket == -1) &#123;
                    perror(&quot;accept&quot;);
                    exit(EXIT_FAILURE);
                &#125;
                event.events = EPOLLIN;
                event.data.fd = new_socket;
                if (epoll_ctl(epfd, EPOLL_CTL_ADD, new_socket, &amp;event) == -1) &#123;
                    perror(&quot;epoll_ctl&quot;);
                    exit(EXIT_FAILURE);
                &#125;
            &#125; else &#123;
                // å¤„ç†å·²è¿æ¥çš„å®¢æˆ·ç«¯æ•°æ®
                char buffer[1024] = &#123;0&#125;;
                int bytes_read = read(events[n].data.fd, buffer, sizeof(buffer));
                if (bytes_read == -1) &#123;
                    perror(&quot;read&quot;);
                    close(events[n].data.fd);
                &#125; else if (bytes_read == 0) &#123;
                    // å®¢æˆ·ç«¯æ–­å¼€è¿æ¥


                    close(events[n].data.fd);
                &#125; else &#123;
                    printf(&quot;Received: %s\n&quot;, buffer);
                    // å›é€æ•°æ®
                    write(events[n].data.fd, buffer, bytes_read);
                &#125;
            &#125;
        &#125;
    &#125;

    close(server_fd);
    return 0;
&#125;
</code></pre>
<h3 id="7-epoll-çš„ç¼ºç‚¹"><a href="#7-epoll-çš„ç¼ºç‚¹" class="headerlink" title="7. epoll çš„ç¼ºç‚¹"></a>7. <strong>epoll çš„ç¼ºç‚¹</strong></h3><ul>
<li><strong>ä»…æ”¯æŒ Linux</strong>: <code>epoll</code> æ˜¯ Linux ç‰¹æœ‰çš„ç³»ç»Ÿè°ƒç”¨ï¼Œå› æ­¤åœ¨è·¨å¹³å°å¼€å‘ä¸­éœ€è¦è€ƒè™‘å…¼å®¹æ€§é—®é¢˜ã€‚</li>
<li><strong>å¤æ‚åº¦è¾ƒé«˜</strong>: ç›¸è¾ƒäº <code>select</code>ï¼Œ<code>epoll</code> çš„ API ä½¿ç”¨ç¨å¤æ‚ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†è¾¹ç¼˜è§¦å‘æ¨¡å¼æ—¶ï¼Œéœ€è¦å¼€å‘è€…æ›´åŠ ç»†è‡´åœ°å¤„ç† I&#x2F;O äº‹ä»¶ã€‚</li>
</ul>
<h3 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h3><p><code>epoll</code> æ˜¯ Linux ä¸Šé«˜æ•ˆçš„ I&#x2F;O å¤šè·¯å¤ç”¨æœºåˆ¶ï¼Œç‰¹åˆ«é€‚åˆå¤„ç†å¤§é‡å¹¶å‘è¿æ¥çš„ç½‘ç»œæœåŠ¡ã€‚é€šè¿‡å‡å°‘ç³»ç»Ÿè°ƒç”¨å’Œä¼˜åŒ–æ•°æ®ç»“æ„ï¼Œ<code>epoll</code> æä¾›äº†æ¯”ä¼ ç»Ÿçš„ <code>select</code> å’Œ <code>poll</code> æ›´é«˜çš„æ€§èƒ½ï¼Œæ˜¯ç°ä»£é«˜æ€§èƒ½ç½‘ç»œæœåŠ¡å™¨å’Œäº‹ä»¶é©±åŠ¨ç³»ç»Ÿçš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ã€‚</p>

      
       <hr><span style="font-style: italic;color: gray;"> è½¬è½½è¯·æ³¨æ˜æ¥æºï¼Œæ¬¢è¿å¯¹æ–‡ç« ä¸­çš„å¼•ç”¨æ¥æºè¿›è¡Œè€ƒè¯ï¼Œæ¬¢è¿æŒ‡å‡ºä»»ä½•æœ‰é”™è¯¯æˆ–ä¸å¤Ÿæ¸…æ™°çš„è¡¨è¾¾ã€‚å¯ä»¥åœ¨ä¸‹é¢è¯„è®ºåŒºè¯„è®ºï¼Œä¹Ÿå¯ä»¥é‚®ä»¶è‡³ jaytp@qq.com </span>
    </div>
</article>


<p>
    <a  class="dashang" onclick="dashangToggle()">ğŸ’°</a>
</p>






    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    Â©2016-2020 Yelog
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="Toggle full screen shortcut key s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close"  onclick="dashangToggle()">Ã—</a>
    <div class="shang_tit">
        <p>Help us with donation</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="æ‰«ç æ”¯æŒ">
            <img src="/img/weixin.jpg" class="weixin" title="æ‰«ç æ”¯æŒ">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">alipay</label></span><span><label><input type="radio" name="pay" value="weixin">weixin</label></span>
    </div>
</div>


</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*æ¸²æŸ“å¯¹åº”çš„è¡¨æ ¼æ ·å¼*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*æ¸²æŸ“æ‰“èµæ ·å¼*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*é«˜äº®ä»£ç å—è¡Œå·*/
        

        /*è®¿é—®æ•°é‡*/
        

        /*ä»£ç é«˜äº®ï¼Œè¡Œå·å¯¹é½*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*æ‰“èµé¡µé¢éšè—ä¸å±•ç¤º*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--åŠ å…¥è¡Œå·çš„é«˜äº®ä»£ç å—æ ·å¼-->

<!--è‡ªå®šä¹‰æ ·å¼è®¾ç½®-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*åˆ—è¡¨æ ·å¼*/
    

    /* èƒŒæ™¯å›¾æ ·å¼ */
    
    


    /*å¼•ç”¨å—æ ·å¼*/
    

    /*æ–‡ç« åˆ—è¡¨èƒŒæ™¯å›¾*/
    

    
</style>







</html>
